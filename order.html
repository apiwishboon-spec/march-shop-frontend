<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Art&Ink Studio â€“ Order</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="container">

    <h1 class="brand">
      <span class="brand-gradient">Art&Ink Studio</span>
    </h1>

    <p class="subtitle" id="item-text"></p>
    <p class="total-price" id="total-text"></p>

    <div id="error" class="error" style="display:none"></div>

    <!-- EMAIL -->
    <label class="label">
      Email address
      <input id="email" type="email" placeholder="you@example.com" required>
    </label>

    <!-- PHONE -->
    <label class="label">
      Phone number
      <input id="phone" type="tel" placeholder="xxx-xxx-xxxx">
    </label>

    <!-- QUANTITY -->
    <label class="label">
      Quantity
      <input id="qty" type="number" min="1" value="1" required>
      <span class="hint">Number of items you want</span>
    </label>

    <!-- PAYMENT SECTION -->
    <div class="payment-box">
      <h3>ðŸ’¸ Payment</h3>
      <p>Please scan the QR code below and upload your payment slip.</p>

      <img 
        src="https://raw.githubusercontent.com/apiwishboon-spec/march-shop-frontend/refs/heads/main/QR_payment.jpg"
        width="220"
        alt="Payment QR"
      >
    </div>

    <!-- SLIP UPLOAD -->
    <label class="label">
      Upload payment slip
      <input 
        id="slip"
        type="file"
        accept="image/png, image/jpeg"
        required
      >
      <span class="hint">Max 5MB â€¢ JPG or PNG</span>
    </label>

    <!-- BUTTONS -->
    <div class="button-row">
      <button class="btn-secondary" onclick="cancelOrder()">Cancel</button>

      <button
        class="btn-primary"
        id="submitBtn"
        onclick="submitOrder()"
      >
        <span class="btn-text">Submit order</span>
        <span class="btn-loader"></span>
      </button>
    </div>

  </div>

  <script src="app.js"></script>

  <script>
    const item = localStorage.getItem("item");
    const price = parseFloat(localStorage.getItem("price"));

    const itemText = document.getElementById("item-text");
    const totalText = document.getElementById("total-text");
    const qtyInput = document.getElementById("qty");

    if (!item || !price) {
      location.href = "index.html";
    }

    function formatCurrency(num) {
      return num.toLocaleString("en-US");
    }

    function updatePrice() {
      const qty = parseInt(qtyInput.value) || 1;

      if (qty < 1) {
        qtyInput.value = 1;
        return;
      }

      const total = price * qty;

      itemText.textContent = `${item} â€” à¸¿${formatCurrency(price)} each`;
      totalText.textContent = `Total: à¸¿${formatCurrency(total)}`;
    }

    qtyInput.addEventListener("input", updatePrice);

    updatePrice();

    function cancelOrder() {
      localStorage.clear();
      location.href = "index.html";
    }
  </script>

</body>
</html>
